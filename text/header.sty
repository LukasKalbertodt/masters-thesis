\ProvidesPackage{header}

% Basic layout
\usepackage[a4paper, left=3cm, right=3cm, top=2.9cm, bottom=2.9cm, footskip=1.3cm]{geometry}

% Everything related to language. We use 'australian' here to get the correct
% DD/MM/YYYY date format in biblatex.
\usepackage[main=american,australian]{babel}


% Setup fonts
%
% So I still have to decide. Either use CM + Biolinum as sans font, or
% Libertine (including Biolinum) everywhere. OR even Palatino?
\usepackage[no-math]{fontspec}
\usepackage{microtype}
% \usepackage{mathpazo}
% \usepackage[mono=false]{libertine}
% \usepackage[libertine]{newtxmath}
\usepackage{biolinum}
% the 0.93 was set to match the x height of libertine font
% the 0.94 was set to match the x height of computer modern font
% \usepackage[scaled=0.94]{zi4}
\setmonofont{Inconsolata}[Scale = MatchLowercase]
% \usepackage{lmodern}
\usepackage{MnSymbol}
\usepackage{fontawesome}

% Paragraph style
\parskip = 10pt
\parindent = 0pt

% Line height
\renewcommand{\baselinestretch}{1.07}\normalsize

\usepackage{titlesec}
\titleformat{\chapter}[display]
    {\vspace{-3cm}\sffamily\raggedleft\fontsize{50}{0}\selectfont\bfseries}
    {\thechapter}
    {-.75em}
    {\fontsize{24}{25}\selectfont\raggedright}
    [\hrule]
\titleformat{\section}[block]
    {\sffamily\LARGE\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}[block]
    {\sffamily\Large\bfseries}{\thesubsection}{1em}{}
\titleformat
{\subsubsection}[block]
    {\sffamily\large\bfseries}{\thesubsubsection}{1em}{}[\vspace{-3mm}]

% Stuff for including images
\usepackage{graphicx}
\usepackage{grffile}
\graphicspath{ {img/} {img/svg2pdf/} }
\newcommand{\includesvg}[2][\columnwidth]{%
    \def\svgwidth{#1}%
    \input{img/svg2pdf/#2.svg.pdf_tex}%
}


% Colors
\usepackage{xcolor}
\definecolor{lightgray}{rgb}{0.83, 0.83, 0.83}
\definecolor{solarized_bg}{HTML}{FDF6E3}
\definecolor{caption-label-color}{HTML}{1f628d}
\definecolor{flat-red-dark}{HTML}{c0392b}
\definecolor{flat-green-dark}{HTML}{27ae60}
\definecolor{flat-green-light}{HTML}{15b24a}
\definecolor{flat-blue-dark}{HTML}{2980b9}
\definecolor{flat-gray-dark}{HTML}{34495e}
\definecolor{link-blue}{HTML}{1e3799}

% Multi-line source code
\usepackage[outputdir=build]{minted}
\usemintedstyle{mysolarized}   % see the `solarized` folder for more info
\setminted{
  % linenos,
  numbersep=10pt,
  autogobble,
  xleftmargin=8pt,
  xrightmargin=8pt,
  frame=single,
  framesep=7pt,
  baselinestretch=1.05,
  escapeinside=@@,
  fontsize=\small     % maybe \footnotesize
}
\newminted{rust}{
    rulecolor=\color{lightgray},
}
\newminted{cpp}{
    rulecolor=\color{lightgray},
}

% Inline code boxes
\usepackage{newverbs}
\usepackage[skins]{tcolorbox}
\newtcbox{\codebox}[0]{
    fontupper=\ttfamily,
    on line,
    colback=solarized_bg!30,
    colframe=solarized_bg!95!black,
    size=fbox,
    arc=3pt,
    boxrule=0.8pt,
    boxsep=1pt,
    top=1pt,
    bottom=1pt,
}
\newcommand{\code}{\collectverb{\codebox}}

% Captions
\usepackage{subcaption}
\usepackage{caption}
\captionsetup{
  margin=12pt,
  font=small,
  labelfont={sf,bf,color=caption-label-color},
  labelsep=period,
}


% Better lists
\usepackage{relsize}
\usepackage{enumitem}
\setlist[itemize,1]{
    label={\raisebox{.6mm}{\footnotesize$\blacktriangleright$}},
    topsep=0mm,
    leftmargin=6mm,
    itemsep=-1pt
}
\setlist[itemize,2]{
    label={\raisebox{.4mm}{\scriptsize$\triangleright$}},
    topsep=-3mm,
    before={\relscale{0.9}},
    after={\vspace{2mm}},
    leftmargin=7mm,
    itemsep=-6pt,
}


% Links
\usepackage[pageanchor=true, hidelinks]{hyperref} % hyperlinks
\usepackage[all]{hypcap}


% Some other packages
\usepackage{lipsum}
\usepackage{csquotes}

% Tables and stuff
\usepackage{array}
\usepackage{arydshln}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

% Citations
\usepackage[style=alphabetic, date=iso, seconds=true, language=australian]{biblatex}
\addbibresource{sources.bib}

\nocite{mit}
\nocite{apache2}
\nocite{cc-by}
\nocite{cc0}



\usepackage[bottom]{footmisc}


% Own commands
\newtcbox{\adjbox}[0]{
    on line,
    colback=white,
    colframe=gray!70,
    size=fbox,
    arc=2pt,
    boxrule=0.6pt,
    boxsep=1pt,
    top=1pt,
    bottom=1pt,
}
\newcommand{\adj}[3][black]{%
  \adjbox{\textsf{\textbf{\color{#1} #2 $\rightarrow$ #3}}}
}

\newcommand{\playground}[1]{%
  \hfill\fbox{%
    \href{https://play.rust-lang.org/#1}{%
      \textcolor{link-blue}{%
        \footnotesize\sffamily Code on Playground \scalebox{.75}{\faExternalLink}%
      }%
    }%
  }%
  \hspace{0mm}%
}

% Typesetting C++
\usepackage{xspace}
\newcommand{\Rplus}{%
  \protect\hspace{-.1em}\protect\raisebox{.35ex}%
  {\smaller{\smaller\textbf{+}}}%
}
\newcommand{\cpp}{\mbox{C\Rplus\hspace{.15ex}\Rplus}\xspace}
\newcommand{\cppeleven}{\mbox{C\Rplus\hspace{.15ex}\Rplus11}\xspace}
